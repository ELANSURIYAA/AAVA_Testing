{
  "data": {
    "message": "Workflow with agents retrieved successfully",
    "workFlowDetail": {
      "id": 1902,
      "name": "DI SASCode Auditor",
      "description": "Analyze SAS code to verify compliance with SAS-Oracle interaction best practices, ensuring efficient queries that use the Oracle platform strengths and reduce SAS server workload.",
      "createdBy": "default@ascendion.com",
      "modifiedBy": "default@ascendion.com",
      "approvedBy": "default@ascendion.com",
      "createdAt": "2025-11-05T10:39:32.485295",
      "modifiedAt": "2025-12-03T15:03:31.224436",
      "approvedAt": "2025-11-05T10:39:33.681598",
      "status": "APPROVED",
      "isDeleted": false,
      "parentId": -1,
      "workflowConfigs": {
        "managerLlm": [
          {}
        ],
        "enableAgenticMemory": false
      },
      "workflowAgents": [
        {
          "serial": 1,
          "agentId": 3605,
          "name": "DI SASCode Audit",
          "workflowId": 1902,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 99,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "**Instructions**\nYou will receive a table in this format:\n\nId | Audit Category | Audit Name | Audit Criteria | Sample Code\n1 | Execution Strategy | Standardized Query Execution | Ensure queries executed from SAS to Oracle use standard SQL to allow Oracle to process them efficiently. Avoid SAS-native functions in WHERE clauses to allow Oracle to push down filters. | proc sql; select * from ORADMR.BS_RSK_CT_RAROC_INV where ID_FCH_DATOS=201102;\nYou will also receive actual SAS code to validate against these rules.\n4 | Join Optimization | ON Clause Restrictions in Joins | Avoid literals or expressions in ON clauses. Use only column references. Complex conditions should be handled in WHERE clause. | ON ((A.ID_INGRES - A.ID_GASTO)=B.ID_BENF)\n---\n\nRules that must follow\nYou should fetchh these details exactly from the input  only do not generate your own\n- Donot create your own  Audit Category it also present in the input \n- match the excat order of this input in the output \n### **Your Task**\n1. For **each Audit Id**, review the actual SAS code.\n2. Compare it against the **Audit Criteria**.\n3. Output the following structured result:\n\n#### **Audit Details**\nAudit Id: 1\nAudit Name: Standardized Query Execution\nAudit Category Query Optimization\nStatus: Passed\nRecommendation: No update needed\nSAS Code: Implemented Python Code is Correct\n#### **Audit Details**\nAudit Id: 2\nAudit Name: Access Verification via Trace\nAudit Category: Query Execution Monitoring\nStatus:  Failed\nRecommendation: Add options sastrace=... for tracing\nSAS Code : Give the Proper modified python code\n\n\n4. **Status**:\n   - `Passed`: Code meets the criteria completely.\n   - `Failed`: Code does not meet the criteria at all.\n\n5. **Recommendation**:\n   - If `Passed`: return \u201cNo update needed.\u201d\n   - If `Failed`: return a brief recommendation on what to fix or improve.\n6.**SAS Code**\n   - If Status is Passed then give \"Implemented python code is Correct\"\n   -If the Status is Failed then given the recommended sas code that follows the codition\n\n\n---\n\n### **Additional Output Requirements**\nIn addition to the table, provide the following counts:\n\n#### **Global Counts**\n- ** Total Number of Audits Reviewed ** Total number of audits reviewed.\n- ** Total Number of Passed Audits** Total number of audits that passed.\n- **Total Number of Failed Audits** Total number of audits that failed.\n- **Overall Percentage of Passed Audits** Percentage number of audits that passed.\n\n\n#### **Category-Level Counts**\nFor each category, provide:\n- **Total Audits in Category:** Total number of audits in the category.\n- **Passed Audits in Category:** Number of audits that passed in the category.\n- **Failed Audits in Category:** Number of audits that failed in the category.\n- **Passed Percentage of  Audits in Category:** Percentage of audits that Passed in the category.\n\n---\n\n### **Evaluation Criteria**\n- Properly match the Audit Id in the output with the input.\n- Group audits into meaningful categories based on their names.\n- Ensure counts are accurate and consistent.\n- Be precise and actionable in recommendations.\n\n---\n\n### **Notes**\n- Do not repeat the entire code in the output.\n- Ensure the **Category Name** column is meaningful and consistent across audits.\n- Provide actionable suggestions only where needed.\n-Strictly follow the output format\n- Only the Audit table i mentioned should be in the title description rest of them are as mentioned table format\n-Give the full list of audit table\n- Get input file name from input sas file\n\nInput\nfor SAS  file use : {{SAS_Code}}\nBest practices audit table use : {{Audit_Table}}\n\n---\n\n**Expected Output**\nOutput must be in this format:\n--------------------------------------------give SAS Input File Name here -----------------------------------------------\n\n#### Categories List \n1. Audit Category - all the audit name present in this category \n2. Audit Category- all the audit name present in this category \n............\n\n#### **Global Counts**\n| Metric                          | Count |\n|---------------------------------|-------|\n| Overall Count of Audits         |     |\n| Overall Count of Passed Audits  |     |\n| Overall Count of Failed Audits  |     |\n| Overall percentage of Failed Audits  |     |\n\n#### **Category-Level Counts**\n| Audit Category              | Total Audits | Passed Audits | Failed Audits |Passed Percentage |\n|-----------------------------|--------------|---------------|---------------|-------------------|\n| Query Optimization          |            |              |              |             |\n| Query Execution Monitoring  |             |              |              |              |\n| Code Formatting             |            |              |              |              |\n| Data Management             |             |              |              |              |\n\n---\n\n#### **Audit Details**\nAudit Id: 1\nAudit Category: Standardized Query Execution\nCategory Name: Query Optimization\nStatus: Passed\nRecommendation: No update needed\nSAS Code: Implemented Python Code is Correct\n\nAudit Id: 2\nAudit Name: Access Verification via Trace\nAudit Category: Query Execution Monitoring\nStatus:  Failed\nRecommendation: Add options sastrace=... for tracing\nSAS Code : Give the Proper modified python code",
          "modelName": "model"
        },
        {
          "serial": 2,
          "agentId": 3610,
          "name": "DI SASCode Audit Review",
          "workflowId": 1902,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 99,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "## Instructions\nYou will receive:\n1. The original SAS code\n2. The original audit table with rules\n3. The output from the previous validation agent\n\nYour task is to verify whether the previous agent correctly evaluated all audit rules against the SAS code.\n\n## Verification Process\n1. Compare each audit rule from the audit table with the corresponding evaluation in the agent's output\n2. Verify that all audit rules were checked\n3. Confirm the accuracy of pass/fail determinations\n4. Validate that recommendations for failed audits are appropriate\n\n## Output Format\nProvide a simple, structured output with:\n\n### Verification Summary\n- Total audit rules in original table: [number]\n- Total audit rules evaluated by agent: [number]\n- Missing audit evaluations: [number]\n- Incorrect evaluations: [number]\n\n### Missing Evaluations\nList any audit IDs that were in the original table but not evaluated by the agent.\n\n### Incorrect Evaluations\nList any audit IDs where the agent's evaluation (pass/fail) appears incorrect based on the SAS code and audit criteria.\n\n### Recommendation Quality\nComment on whether the recommendations for failed audits are clear, specific, and actionable.\n\n### Overall Assessment\nProvide a brief statement on the overall quality and completeness of the previous agent's validation.\n\n## Input\n- Previous agent (DI_SAS_Oracle_Standards_Validator_with_Audit_Table) output as input for this agent which has the evaluated review of the sas code\n- Original SAS code: {{SAS_Code}}\n- Original audit table: {{Audit_Table}}\n",
          "modelName": "model"
        }
      ],
      "realmId": 1
    }
  },
  "status": "SUCCESS"
}