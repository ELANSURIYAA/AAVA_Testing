{
  "data": {
    "message": "Workflow with agents retrieved successfully",
    "workFlowDetail": {
      "id": 3785,
      "name": "DB2 To Synapse Convert",
      "description": "DB2_To_Synapse_Convert",
      "createdBy": "default@ascendion.com",
      "modifiedBy": "default@ascendion.com",
      "approvedBy": "default@ascendion.com",
      "createdAt": "2025-11-05T11:42:19.096591",
      "modifiedAt": "2025-12-03T15:03:31.224436",
      "approvedAt": "2025-11-05T11:42:20.149991",
      "status": "APPROVED",
      "isDeleted": false,
      "parentId": -1,
      "workflowConfigs": {
        "managerLlm": [
          {
            "id": 25,
            "topP": 0.95,
            "maxToken": 4000,
            "temperature": 0.3,
            "modelDeploymentName": "o3-mini"
          }
        ],
        "enableAgenticMemory": false
      },
      "workflowAgents": [
        {
          "serial": 1,
          "agentId": 5218,
          "name": "DB2 TO SYNAPSE CONVERTER",
          "workflowId": 3785,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 150,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "The AI agent takes an input DB2 SQL query or stored procedure and performs the following steps:\n\nAnalyze the DB2 SQL Code:\n\nIdentify key components such as SELECT statements, WHERE clauses, JOINs, GROUP BY, ORDER BY, stored procedures, and special DB2-specific syntax.\nParse the DB2 Query or Procedure:\n\nExtract details such as table references, functions, data types, and procedural logic.\nMap DB2 Syntax to Synapse SQL:\n\nConvert DB2-specific syntax (e.g., FETCH FIRST N ROWS ONLY, RANK() OVER(), etc.) into its equivalent in Synapse SQL.\nHandle differences in functions, data types, and SQL dialects.\nGenerate the Synapse SQL Code:\n\nEnsure correct usage of Synapse-specific functions like TOP, PERCENTILE_CONT(), STRING_AGG(), and IDENTITY.\nAdapt stored procedures to Synapse-compatible T-SQL syntax.\nAddress Key Differences:\n\nTable creation and indexing\nHandling of sequences and identity columns\nJOIN operations and optimizations\nWindow functions and analytics\nTemporary table and CTE handling\nDate and string manipulation functions\nError handling and transaction control\nOptimize for Synapse Performance:\n\nAdjust queries to align with Synapse MPP architecture for better execution efficiency.\nUse appropriate indexing and partitioning strategies.\nEnsure Code Quality:\n\nFormat the SQL code following best practices.\nAdd necessary comments for clarity.\nInclude Cost Estimation:\n\nProvide the cost consumed by the API for the conversion in the output.\nINPUT:\nFor input DB2 SQL code, use this file: %1$s\nNote:\nFollow the expected output format strictly.\nOnly convert the given query\u2014do not add anything extra.\nReturn the output in the same format as expected.",
          "modelName": "model"
        },
        {
          "serial": 2,
          "agentId": 4879,
          "name": "DB2 to SYNAPSE Unit Testing",
          "workflowId": 3785,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 189,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "You are tasked with creating a set of unit test cases and a Pytest script for the given Synapse SQL queries. Your expertise in SQL testing methodologies and best practices will be essential in ensuring comprehensive test coverage.\n\nINSTRUCTIONS:\nAnalyze the provided Synapse SQL queries (converted from DB2) to identify key functionalities, data transformations, and potential edge cases.\nCreate a list of test cases that cover:\na. Happy path scenarios (valid data, expected transformations)\nb. Edge cases (e.g., empty tables, NULL values, extreme values)\nc. Performance considerations (query execution time, index utilization)\nd. Error handling and exception scenarios (invalid inputs, constraint violations)\nDesign test cases using Synapse SQL-specific terminology and concepts (e.g., distributed queries, columnstore indexes, T-SQL syntax differences from DB2).\nImplement the test cases using Pytest and appropriate database testing frameworks.\nEnsure proper setup and teardown of the test database/schema for each test.\nUse assertions to validate expected query results, performance metrics, and error handling.\nInclude comments explaining the purpose of each test case.\nOrganize the test cases logically, grouping related tests together.\nImplement any necessary helper functions or fixtures to support the tests.\nEnsure the Pytest script follows PEP 8 style guidelines.\nOUTPUT FORMAT:\nTest Case List:\nTest case ID\nTest case description\nExpected outcome\nPytest Script for each test case\nInclude the cost consumed by the API for this call in the output.\nINPUT:\nUse the previous DB2 to Synapse converter agent\u2019s converted Synapse SQL script as input.",
          "modelName": "model"
        },
        {
          "serial": 3,
          "agentId": 5181,
          "name": "DB2 To SYNAPSE Conversion Tester",
          "workflowId": 3785,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 182,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "You are tasked with processing DB2 queries and stored procedures alongside their converted Synapse SQL equivalents. The agent performs the following tasks:\n\nSyntax Change Detection: Compares DB2 and Synapse SQL code to highlight differences, such as:\n\nFunction conversions (e.g., VARCHAR_FORMAT() \u2192 Synapse FORMAT() or CONVERT())\nData type transformations (DECIMAL() \u2192 NUMERIC(), GRAPHIC \u2192 NCHAR, etc.)\nQuery structure modifications (e.g., JOIN handling, Common Table Expressions (CTEs))\nDifferences in aggregation and window functions\nHandling of NULL values, case sensitivity adjustments, and implicit conversions\nRecommended Manual Interventions: Identifies areas requiring manual fixes, such as:\n\nPerformance optimizations (DISTRIBUTE BY, CLUSTERED COLUMNSTORE INDEX)\nHandling DB2-specific SQL extensions in Synapse\nComplex expressions requiring Synapse-compatible UDFs\nCreate a comprehensive list of test cases covering:\na. Syntax changes\nb. Manual interventions\n\nDevelop a Pytest script for each test case\n\nEach script should validate the correctness of the converted Synapse SQL.\nInclude the cost consumed by the API for this call in the output.\n\nOutput:\n\nTest Case List:\n\nTest case ID\nTest case description\nExpected outcome\nPytest Script for each test case\n\nInclude the cost consumed by the API for this call in the output.\n\nINPUT:\n\nFor the input DB2 SQL code analysis, use this file: %2$s\nAlso, take the previous DB2-to-Synapse converter agent\u2019s converted output as input.",
          "modelName": "model"
        },
        {
          "serial": 4,
          "agentId": 5176,
          "name": "DB2 To SYNAPSE Reconciliation",
          "workflowId": 3785,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 36,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "Your task is to compare the data output from DB2 code and its corresponding converted Azure Synapse implementation.\n\nInstructions\nAnalyze the DB2 and Synapse code to identify input data sources and output targets (tables or files).\nCreate a set of diverse test cases covering various scenarios, including:\na. Record insertions\nb. Record updates\nc. Record deletions\nDevelop a pytest script that:\na. Executes the DB2 query\nb. Executes the Synapse query\nc. Retrieves the output from both DB2 and Synapse targets\nd. Compares the outputs to identify discrepancies\ne. Generates a detailed reconciliation report, highlighting records that match and those that do not across inserts, updates, and deletes\nInclude appropriate assertions to validate test results.\nImplement proper error handling and logging mechanisms.\nEnsure the pytest script is modular, maintainable, and follows best practices.\nCompute the total cost incurred for the execution of the agent.\nINPUT:\nFor the input DB2 code, use this file: %1$s\nAlso, take the previously converted Azure Synapse script as input.",
          "modelName": "model"
        },
        {
          "serial": 5,
          "agentId": 4988,
          "name": "DB2 TO SYNAPSE REVIEWER",
          "workflowId": 3785,
          "agentDetails": {
            "topP": 0.94,
            "maxRpm": null,
            "levelId": 201,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "4000",
            "isVerbose": true,
            "temperature": 0.3,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "Your task is to meticulously analyze and compare the original DB2 SQL code with the newly converted Synapse SQL implementation. Your review should focus on ensuring that the conversion is correct, complete, and optimized for performance in Synapse Analytics.\n\nINSTRUCTIONS:\nUnderstand the Original DB2 Code\n\nCarefully analyze the DB2 SQL code, noting its structure, logic, and data flow.\nExamine the Converted Synapse SQL Code\n\nPay close attention to:\na. Data types and schema mappings\nb. Query structure, joins, and indexing strategies\nc. Window functions, aggregations, and subqueries\nd. Error handling and transaction management\nCompare the DB2 and Synapse Implementations Side-by-Side\n\nEnsure that:\na. All functionality from the DB2 code is retained in Synapse SQL\nb. Business logic and data transformations are preserved\nc. Query performance is optimized for the Synapse environment\nVerify Synapse-Specific Optimizations\n\nCheck that the code effectively uses:\na. Dedicated vs. serverless SQL pools\nb. Columnstore indexes for performance improvement\nc. Data distribution strategies to avoid data movement issues\nd. Synapse functions and optimizations where applicable\nTest the Synapse SQL Code with Sample Data\n\nValidate whether the output matches the expected results from DB2.\nIdentify Performance Bottlenecks or Areas for Improvement\n\nHighlight inefficiencies in query execution plans, indexing, or schema structure.\nDocument Findings\n\nProvide a comprehensive report covering discrepancies, optimizations, and overall assessment.\nOUTPUT FORMAT:\nProvide a structured code review report with the following sections:\n\nSummary\nConversion Accuracy\nDiscrepancies and Issues\nOptimization Suggestions\nOverall Assessment\nRecommendations\nAPI Cost Breakdown\nINPUT:\nUse the provided DB2 SQL script: ```%1$s```\nUse the previously converted Synapse SQL script as input.",
          "modelName": "model"
        }
      ],
      "realmId": 1
    }
  },
  "status": "SUCCESS"
}