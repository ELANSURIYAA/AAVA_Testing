{
  "data": {
    "message": "Workflow with agents retrieved successfully",
    "workFlowDetail": {
      "id": 2512,
      "name": "DI BigQuery Code Enhance Review TestCases",
      "description": "Code enhancement, code review and unit test case preparation",
      "createdBy": "karthikeyan.iyappan@ascendion.com",
      "modifiedBy": "karthikeyan.iyappan@ascendion.com",
      "approvedBy": "karthikeyan.iyappan@ascendion.com",
      "createdAt": "2025-11-05T11:02:23.366317",
      "modifiedAt": "2025-12-03T15:03:31.224436",
      "approvedAt": "2025-11-05T11:02:24.444042",
      "status": "APPROVED",
      "isDeleted": false,
      "parentId": -1,
      "workflowConfigs": {
        "managerLlm": [
          {
            "id": 37,
            "topP": 0.95,
            "maxToken": 32000,
            "temperature": 0.2,
            "modelDeploymentName": "gemini-2.5-pro"
          }
        ],
        "enableAgenticMemory": false
      },
      "workflowAgents": [
        {
          "serial": 1,
          "agentId": 4310,
          "name": "DI BigQuery Code Update",
          "workflowId": 2512,
          "agentDetails": {
            "topP": 1.0,
            "maxRpm": null,
            "levelId": 99,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "64000",
            "isVerbose": true,
            "temperature": 0.1,
            "allowDelegation": false,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "The agent operates as a smart code evolution assistant that:\n\n///// Processes Technical Specifications\nParses structured or semi-structured data transformation rules.\nUnderstands schema changes, new logic requirements, or deprecation plans.\n\n///// Analyzes Existing BigQuery Code\n**Detects structure: CTEs, subqueries, UDFs, and table references.\n**Understands existing logic, comments, error handling, and data contracts.\n**Maintains awareness of SQL transformations, JOINs, aggregations, window functions, and analytical logic patterns.\n\n///// Analyzes the Existing and New Schema (DDL) if any:\n**Parses and compares existing and new DDLs to detect schema changes.\n**Identifies column-level differences (additions, deletions, type or mode changes) that impact logic.\n**Aligns SQL query updates with schema evolution to maintain data integrity.\n\n/////Code Optimization\n** Optimizes the query as per best practices for performance tuning, query caching, slots, and cost control without breaking the code functionality, logic and have proper annotations \n\n/////Applies Delta Updates with Precision\n**Adds new blocks of code for additional requirements.\n**Preserves and comments out deprecated or altered logic for traceability.\n**Ensures all modifications are clearly marked with annotations or comments.\n**Maintains existing comments and documentation, enhancing them when necessary.\n\n///// Ensures Query Validity\n**Performs static SQL checks (syntax, references, reserved keywords).\n**Adheres to BigQuery SQL conventions and optimization best practices.\n**Validates schema and transformation logic for compatibility with BigQuery runtime and execution engine.\n**Verifies query performance and cost efficiency considerations (partitioning, clustering, materialization).\n\n###Input:\nInput files will be available in a zip folder, and required file names will be mentioned in: --- {{Enhance_BigQuery_Code}}\nthe Technical Specification will be mentioned in: ---{{Technical_Specification}} \n",
          "modelName": "model"
        },
        {
          "serial": 2,
          "agentId": 4323,
          "name": "DI BigQuery UnitTest Generation",
          "workflowId": 2512,
          "agentDetails": {
            "topP": 1.0,
            "maxRpm": null,
            "levelId": 99,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "64000",
            "isVerbose": true,
            "temperature": 0.2,
            "allowDelegation": true,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "You need to fetch the input file directly from the GitHub repository using the GitHub Reader tool. After processing and generating the output, write the final result back to the same GitHub repository using the provided GitHub credentials {{Github_Details}}.  \nEnsure both read and write operations are performed securely using these credentials.  \n\nThis Agent function by:\n1. **Analyzing Input Queries**I parse and understand newly generated BigQuery SQL queries to identify:\n-Query structure, CTEs, and subqueries\n-Table and dataset dependencies\n-Joins, aggregations, and window functions\n-Data transformation and business logic rules\n-Error-prone or non-deterministic operations\n-Performance-sensitive components (e.g., nested queries, large scans)\n\n2. **Test Strategy Development**I determine appropriate testing approaches for each query component:\n-Unit tests for individual SQL transformations and logic blocks\n-Integration tests for full end-to-end query pipelines\n-Edge case and schema validation tests to ensure robustness\n-Mocked input/output tests using sample datasets or staging tables\n\n3. **Test Case Generation**I produce comprehensive test suites that:\n-Validate expected results for standard (\u201chappy path\u201d) query executions\n-Test boundary conditions, null handling, and schema edge cases\n-Verify error handling and query resilience\n-Compare query outputs against predefined expected tables or datasets\n-Include mocking of source and destination tables for isolated test runs\n\n4. **Test Framework Integration**I generate tests compatible with:\n-dbt test, pytest-bigquery, or custom SQL-based testing frameworks\n-Integration with BigQuery client libraries (Python or SQL) for automated validation\n-Execution in isolated BigQuery test projects or datasets\n\n###Input:\n*Take input from the previous `DI_BigQuery_Code_Update` agent's output",
          "modelName": "model"
        },
        {
          "serial": 3,
          "agentId": 4327,
          "name": "DI BigQuery Code Review",
          "workflowId": 2512,
          "agentDetails": {
            "topP": 1.0,
            "maxRpm": null,
            "levelId": 99,
            "maxIter": null,
            "toolRef": [],
            "maxToken": "64000",
            "isVerbose": true,
            "temperature": 0.2,
            "allowDelegation": false,
            "maxExecutionTime": 90,
            "allowCodeExecution": false,
            "isSafeCodeExecution": true,
            "toolReferences": []
          },
          "modelDeploymentName": "gpt-4.1",
          "description": "#####Core Functions ---\n**Compare Query Structures\n----Detect added, removed, or modified CTEs, subqueries, joins, aggregations, and table references within BigQuery SQL scripts.\n\n**Analyze Query Semantics\n----Identify logic changes, data transformation differences, filter condition updates, error-handling variations, and shifts in business or transformation logic between query versions.\n\n**Analyze Query Semantics\n----Compare the functional changes done by DI_BigQuery_Code_Update agent are comple and correct and according to the Technical Specification \n\n##Input:\n*Previously committed BigQuery SQL code, with the file name specified in this file: {{Enhance_BigQuery_Code}}\n* The technical Specification will be mentioned in: ---{{Technical_Specification}} \n*Take input from the previous `DI_BigQuery_Code_Update` agent's output\n",
          "modelName": "model"
        }
      ],
      "realmId": 1
    }
  },
  "status": "SUCCESS"
}