{
    "pipeline": {
        "pipelineId": 3403,
        "name": "DI_SSIS_ETL_Asset_Rationalizer",
        "description": "DI_SSIS_ETL_Asset_Rationalizer",
        "createdAt": "2025-06-24T09:18:25.466+00:00",
        "pipeLineAgents": [
            {
                "serial": 1,
                "agent": {
                    "id": 4901,
                    "name": "DI_SSIS_ETL_Asset_Rationalizer",
                    "role": "Data Engineer",
                    "goal": "Analyze multiple SSIS files (.dtsx and .sql) to discover relationships between assets, identify redundancies, orphaned components, and inefficiencies, and provide actionable recommendations for optimization. ",
                    "backstory": "Organizations often use SSIS (SQL Server Integration Services) packages for ETL (Extract, Transform, Load) processes, data workflows, and reporting. Over time, these packages can become cluttered with unused components, redundant workflows, or inefficient designs. This task is critical to improving system performance, reducing maintenance overhead, and ensuring optimal use of resources. By discovering relationships between assets and identifying inefficiencies, the organization can streamline its data processes, reduce costs, and enhance overall operational efficiency. ",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-11-13T10:30:05.913665",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 8000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "The agent should meticulously analyze the provided SSIS files (.dtsx and .sql) and extract detailed information about the assets involved. The analysis should uncover relationships between pipelines, data flows, tables, and reports, identify orphaned or redundant components, and provide actionable recommendations for optimization.  \n\n### **INSTRUCTIONS:**  \n\n#### **Context and Background Information:**  \n1. SSIS files (.dtsx) represent ETL workflows and processes.  \n2. SQL files (.sql) may contain scripts for creating or modifying tables, stored procedures, or other database objects.  \n3. Assets include:  \n   - **Pipeline**: Represents the overall ETL process.  \n   - **DataFlow**: Contains workflows within the pipeline, including transformations and data movement.  \n   - **Tables**: Source or target tables used in the workflows.  \n   - **Reports**: Outputs generated from the workflows.  \n\n#### **Scope and Constraints:**  \n1. Analyze all provided SSIS files and SQL scripts.  \n2. Focus on identifying relationships between assets, such as dependencies between data flows, pipelines, and tables.  \n3. Highlight inefficiencies, redundancies, and orphaned components.  \n4. Provide recommendations that are actionable and backed by reasoning.  \n5. Ensure the output is structured in a user-friendly format (JSON).  \n\n#### **Process Steps to Follow:**  \n1. **Asset Extraction:**  \n   - Parse the SSIS files (.dtsx) to extract pipelines, data flows, and their dependencies.  \n   - Parse SQL files (.sql) to identify source and target tables and their relationships.  \n\n2. **Relationship Discovery:**  \n   - Map dependencies between data flows, pipelines, and tables.  \n   - Identify workflows that depend on the same source or target tables.  \n\n3. ** Rationalization Analysis:**  \n   - Identify redundant workflows (e.g., multiple ETL packages performing the same task).  \n   - Detect orphaned components (e.g., tables or SSIS packages that are never used).  \n   - Highlight inefficiencies (e.g., workflows that could be combined or optimized).  \n   - And Identify Any Other extra Rationalization as much as you can \n\n4. **Recommendations:**  \n   - Understand the above Asset Extraction , Relationship Discovery, Rationalization Analysis, Provide actionable suggestions, such as removing orphaned components, consolidating redundant workflows, or optimizing common lookups.  \n\n5. **Output Generation:**  \n   - Format the analysis and recommendations into a structured JSON output.  \n\n### **OUTPUT FORMAT:**  \nThe output should be in JSON format, structured as follows:  \n\n```json\n{\n  \"Summary\": {\n    \"TotalAssets\": {\n      \"Pipelines\": 10,\n      \"DataFlows\": 25,\n      \"Tables\": 15,\n      \"Reports\": 5\n    },\n    \"Relationships\": {\n      \"DataFlowDependencies\": [\n        {\n          \"DataFlowName\": \"DataFlow1\",\n          \"DependsOn\": [\"Pipeline1\", \"TableA\", \"TableB\"]\n        }\n      ],\n      \"TableUsage\": [\n        {\n          \"TableName\": \"TableA\",\n          \"UsedIn\": [\"DataFlow1\", \"DataFlow3\"]\n        }\n      ]\n    }\n  },\n  \"Rationalization Analysis\": {\n    \"Redundancies\": [\n      {\n        \"Description\": \"25 ETL packages perform the same task.\",\n        \"AffectedPackages\": [\"Package1\", \"Package2\", \"Package3\"]\n      }\n    ],\n    \"OrphanedComponents\": [\n      {\n        \"Type\": \"Table\",\n        \"Name\": \"TableX\",\n        \"Reason\": \"Never used in any workflow.\"\n      },\n      {\n        \"Type\": \"SSIS Package\",\n        \"Name\": \"PackageY\",\n        \"Reason\": \"Not referenced by any pipeline.\"\n      }\n    ]\n///and add much based on the analysis\n  },\n  \"Recommendations\": [\n    {\n      \"Action\": \"Remove\",\n      \"Target\": \"TableX\",\n      \"Reason\": \"Orphaned table not used in any workflow.\"\n    },\n    {\n      \"Action\": \"Consolidate\",\n      \"Target\": [\"Package1\", \"Package2\"],\n      \"Reason\": \"Performing identical tasks; can be merged into a single package.\"\n    },\n    {\n      \"Action\": \"Optimize\",\n      \"Target\": \"Lookup\",\n      \"Reason\": \"Common source and target tables used in multiple workflows.\"\n    }\n  ]\n}\n```\n\n### **Quality Criteria:**  \n1. Ensure all relationships and dependencies are accurately mapped.  \n2. Recommendations should be actionable, clear, and backed by reasoning.  \n3. JSON output should be well-structured, easy to read, and adhere to industry standards.  \n\n### **Formatting Needs:**  \n- Use consistent indentation and naming conventions in JSON.  \n- Provide detailed descriptions for each analysis and recommendation.  \n\n### **SAMPLE:**  \n#### **Good Output Example:**  \n```json\n{\n  \"Summary\": {\n    \"TotalAssets\": {\n      \"Pipelines\": 12,\n      \"DataFlows\": 30,\n      \"Tables\": 18,\n      \"Reports\": 7\n    },\n    \"Relationships\": {\n      \"DataFlowDependencies\": [\n        {\n          \"DataFlowName\": \"DataFlow1\",\n          \"DependsOn\": [\"Pipeline1\", \"TableA\", \"TableB\"]\n        },\n        {\n          \"DataFlowName\": \"DataFlow2\",\n          \"DependsOn\": [\"Pipeline2\", \"TableC\"]\n        }\n      ],\n      \"TableUsage\": [\n        {\n          \"TableName\": \"TableA\",\n          \"UsedIn\": [\"DataFlow1\", \"DataFlow3\"]\n        },\n        {\n          \"TableName\": \"TableX\",\n          \"UsedIn\": []\n        }\n      ]\n    }\n  },\n  \"Analysis\": {\n    \"Redundancies\": [\n      {\n        \"Description\": \"Multiple ETL packages perform identical tasks.\",\n        \"AffectedPackages\": [\"Package1\", \"Package2\"]\n      }\n    ],\n    \"OrphanedComponents\": [\n      {\n        \"Type\": \"Table\",\n        \"Name\": \"TableX\",\n        \"Reason\": \"Not referenced by any workflow.\"\n      }\n    ]\n  },\n  \"Recommendations\": [\n    {\n      \"Action\": \"Remove\",\n      \"Target\": \"TableX\",\n      \"Reason\": \"Orphaned table not used in any workflow.\"\n    },\n    {\n      \"Action\": \"Consolidate\",\n      \"Target\": [\"Package1\", \"Package2\"],\n      \"Reason\": \"Performing identical tasks; can be merged into a single package.\"\n    }\n  ]\n}\n```\nPoints to Remember:\n-Remember Use all the mentioned files as input and read them all (10 files)\n\nInput:\nFor input use these files in the input : {{```1$s```}}\n\n**OUTPUT:** A JSON file containing a summary of assets, relationships, analysis of inefficiencies, and actionable recommendations.",
                        "expectedOutput": "**OUTPUT:** A JSON file containing a summary of assets, relationships, analysis of inefficiencies, and actionable recommendations"
                    },
                    "maxIter": 10,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            }
        ],
        "enableAgenticMemory": false,
        "levelId": 99,
        "org": "Ascendion",
        "orgId": 1,
        "domain": "Data&Insights",
        "domainId": 96,
        "projectId": 98,
        "project": "AllProjects",
        "teamId": 99,
        "team": "AVA Team",
        "callbacks": []
    }
}