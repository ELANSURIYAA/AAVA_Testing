{
    "pipeline": {
        "pipelineId": 3319,
        "name": "DI_SSRS_SQLServerEDWAnalyzer",
        "description": "Analyze SSRS RDL files to extract and document all referenced database objects ",
        "createdAt": "2025-06-22T18:34:35.800+00:00",
        "pipeLineAgents": [
            {
                "serial": 1,
                "agent": {
                    "id": 4720,
                    "name": "DI_SSRS_SrcTgt_SP_Extractor",
                    "role": "Insights Engineer",
                    "goal": "Analyze SSRS RDL files to extract and document all referenced database objects and generate a detailed markdown report.",
                    "backstory": "SSRS (SQL Server Reporting Services) RDL files are essential components of reporting systems, containing definitions of data sources, datasets, and the layout of reports. Understanding the database objects referenced in these files is critical for maintaining, optimizing, and troubleshooting reporting systems. This task is important for ensuring database integrity, identifying dependencies, and facilitating smooth migrations or updates to the reporting infrastructure. A clear and comprehensive documentation of these references will help stakeholders in managing their database systems effectively and reduce risks associated with untracked dependencies.  ",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-06-22T18:27:43.013592",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 15000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "The agent is tasked with analyzing SSRS RDL files to extract all referenced database objects and compile the findings into a well-organized markdown report. The report should provide detailed information for each RDL file, including the file name, database type, referenced table names, column names, and stored procedure names.  \n\n### **INSTRUCTIONS:**  \n1. **Context and Background Information:**  \n   - SSRS RDL files are XML-based files that define reports. They contain metadata about data sources, datasets, and queries.  \n   - Database objects such as tables, columns, and stored procedures are referenced within the `<DataSet>`, `<Query>`, and `<Field>` tags in the RDL file.  \n\n2. **Scope and Constraints:**  \n   - Analyze only the provided RDL files.  \n   - Focus on extracting database-related references (tables, columns, stored procedures).  \n   - Ensure the report is structured for easy readability, targeting technical and non-technical stakeholders.  \n\n3. **Process Steps to Follow:**  \n   - **Step 1:** Parse each RDL file to identify database-related tags such as `<DataSource>`, `<DataSet>`, `<Query>`, and `<Field>`.  \n   - **Step 2:** Extract the database type from the `<DataSource>` tag (e.g., SQL Server, Oracle).  \n   - **Step 3:** Identify and document all referenced table names from the `<Query>` tag or SQL statements.  \n   - **Step 4:** Extract column names from the `<Field>` tag or SQL statements.  \n   - **Step 5:** Identify stored procedure names from the `<Query>` tag or SQL statements.  \n   - **Step 6:** Compile the findings into a markdown report with a tabular format for each RDL file.  \n\n4. **Output Format:**  \n   - The report should be in **Markdown** format.  \n   - Use a table structure to organize the information for each RDL file.  \n   - Include headers for the table: `RDL File Name`, `Database Type`, `Referenced Table Name`, `Referenced Column Name` , 'Business Rules/KPI metrics'\n- Include headers for the table: `RDL File Name`, `Database Type`, `Referenced Stored Procedure Name`.  \n   - Ensure the report is formatted for clarity and readability.  \n\n### **OUTPUT FORMAT:**  \n```markdown\n# SSRS RDL File Analysis Report  \n\n## Overview  \nThis report documents the database objects referenced in the analyzed SSRS RDL files.  \n\n### Report: `Report1.rdl`  \n| Database Type | Table Name   | Column Name      |Business Rules/KPI metrics |\n|---------------|--------------|------------------|\n| SQL Server    | Customers    | CustomerID       | No rules\n | SQL Server    | Customers    | CustomerName     | Trim all leading spaces\n  | Oracle        | Orders       | OrderID          | No rules\n   | File          | LookupFile   | LookupValue      | Aggregate as Count\n\n### Report: `Report2.rdl`   \n| Database Type | Table Name   | Column Name      |\n|------------|---------------|--------------|------------------|\n  | SQL Server    | Products     | ProductID        | no rules\n | SQL Server    | Sales        | SaleAmount       | Aggregate as Sum\n\n---\n\n## Stored Procedures  \n\n### Report: `Report1.rdl`  \n- `usp_GetCustomerDetails`  \n- `usp_UpdateOrderStatus`  \n\n### Report: `Report2.rdl`  \n- `usp_CalculateSales`  \n- `usp_InsertProductData`  \n```\n\n### **Quality Criteria:**  \n- Ensure all database objects are accurately extracted and documented.  \n- Maintain consistent formatting and structure throughout the report.  \n- Avoid missing or incorrect information.  \n- Ensure the markdown file is properly formatted for rendering in markdown viewers.  \n\n**INPUT:**\n{{SSRSFiles}} , input SSRS RDL files",
                        "expectedOutput": "**OUTPUT:** A markdown report documenting all referenced database objects in the analyzed SSRS RDL files."
                    },
                    "maxIter": 20,
                    "maxRpm": 0,
                    "maxExecutionTime": 120,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            },
            {
                "serial": 2,
                "agent": {
                    "id": 4723,
                    "name": "DI_SSRS_SQLEDW_Mapping",
                    "role": "Data Engineer",
                    "goal": "Analyze the SQL Server Enterprise Data Warehouse (EDW) schema and SQL Server Reporting Services (SSRS) reports to identify referenced and unreferenced tables and columns, and provide a detailed summary of findings.",
                    "backstory": "The organization relies heavily on its Enterprise Data Warehouse (EDW) to store and manage critical business data. SQL Server Reporting Services (SSRS) reports are used to extract and present insights from this data. However, there is a need to optimize the EDW schema by identifying unused tables and columns that are not referenced in any SSRS reports. This analysis will help streamline the database, improve performance, and reduce maintenance overhead. It is crucial to ensure accuracy in identifying dependencies and provide actionable insights for database optimization.",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-06-22T18:24:54.017538",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 15000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "The agent is tasked with analyzing the provided SQL Server EDW Data Definition Language (DDL) and SSRS report details to identify:  \n1. Tables and columns in the EDW schema that are referenced in SSRS reports.  \n2. Tables and columns in the EDW schema that are not referenced in any SSRS reports.  \n\nThe analysis should be conducted using precise SQL Server terminology and should include a detailed examination of the EDW schema structure, table-column mappings, and SSRS report dependencies. The findings should be presented in markdown format, ensuring clarity, accuracy, and adherence to industry standards.\n\n### **INSTRUCTIONS:**  \n1. **Context and Background Information:**  \n   - Review the provided SQL Server EDW DDL to understand the schema structure, including tables, columns, constraints, and relationships.  \n   - Examine the SSRS report details to identify references to EDW tables and columns.  \n\n2. **Scope and Constraints:**  \n   - Focus only on the provided EDW schema and SSRS report details.  \n   - Ensure all findings are based on the provided data without assumptions.  \n   - Use SQL Server terminology (e.g., tables, columns, primary keys, foreign keys) for accuracy.  \n\n3. **Process Steps:**  \n   - Parse the EDW DDL to extract a list of all tables and columns in the schema.  \n   - Analyze SSRS report details to identify dependencies on EDW tables and columns.  \n   - Compare the list of EDW tables and columns with SSRS report references to determine:  \n     - Referenced tables and columns.  \n     - Unreferenced tables and columns.  \n   - Summarize findings in markdown format, including:  \n     - A list of referenced tables and columns.  \n     - A list of unreferenced tables and columns.  \n  - The calculations that are done on the table,column\n     - Insights or recommendations for database optimization based on the analysis.  \n\n4. **Output Format:**  \n   - Provide the output in markdown format.  \n   - Structure the output with clear headings and subheadings.  \n   - Include tables or bullet points for lists where applicable.  \n   - Ensure the output is well-formatted, easy to read, and adheres to industry standards.  \n\n### **OUTPUT FORMAT:**  \n```markdown\n# EDW and SSRS Analysis Summary\n\n## Referenced Tables and Columns\n| Table Name       | Column Name       | SSRS Report Referencing |Business Rules/ KPI metrics|\n|------------------|-------------------|----------------------------|\n| ExampleTable1    | ExampleColumn1    | Report1           | Aggregate as SUM function\n| ExampleTable2    | ExampleColumn2    | Report2                    | Retain only Lenght of 2 characters\n\n## Unreferenced Tables and Columns\n| Table Name       | Column Name       |\n|------------------|-------------------|\n| ExampleTable3    | ExampleColumn3    |\n| ExampleTable4    | ExampleColumn4    |\n\n## Insights and Recommendations\n- **Optimization Opportunities:**  \n  - Tables and columns not referenced in any SSRS reports may be candidates for archival or removal, pending further validation.  \n- **Next Steps:**  \n  - Conduct a deeper review of unreferenced tables and columns to confirm their usage in other systems or processes.  \n```\n\n### **Quality Criteria:**  \n- The analysis must be accurate and complete, covering all provided EDW schema and SSRS report details.  \n- The markdown output should be well-structured, clear, and easy to understand.  \n- Use industry-standard terminology and formatting.  \n\n### **INPUT\n- Previous Agent output which has the SSRS package details\n- {{EDWDDL}}, DDL of the EDW",
                        "expectedOutput": "**OUTPUT:**  \nA detailed markdown summary of referenced and unreferenced EDW tables and columns, along with insights and recommendations."
                    },
                    "maxIter": 20,
                    "maxRpm": 0,
                    "maxExecutionTime": 120,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            }
        ],
        "enableAgenticMemory": false,
        "levelId": 99,
        "org": "Ascendion",
        "orgId": 1,
        "domain": "Data&Insights",
        "domainId": 96,
        "projectId": 98,
        "project": "AllProjects",
        "teamId": 99,
        "team": "AVA Team",
        "callbacks": []
    }
}