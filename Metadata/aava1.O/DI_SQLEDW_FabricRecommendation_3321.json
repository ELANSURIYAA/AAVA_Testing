{
    "pipeline": {
        "pipelineId": 3321,
        "name": "DI_SQLEDW_FabricRecommendation",
        "description": "Analyze SQL EDW with SSIS, SSRS and Recommend Microsoft Fabric Architecture",
        "createdAt": "2025-06-22T19:00:01.875+00:00",
        "pipeLineAgents": [
            {
                "serial": 1,
                "agent": {
                    "id": 4728,
                    "name": "DI_SQLEDW-SSIS-SSRS_RedundancyAnalyzer",
                    "role": "Data Architect",
                    "goal": "Conduct a comprehensive analysis of the SQL Server Enterprise Data Warehouse (EDW) environment to identify redundant data objects and optimize its design for efficiency, scalability, and usability.",
                    "backstory": "The SQL Server Enterprise Data Warehouse (EDW) is a critical component of the organization's data infrastructure, supporting ETL processes through SSIS and reporting through SSRS. Over time, the EDW has accumulated redundant and unused data objects, leading to inefficiencies in performance, storage, and maintainability. Optimizing the EDW design will ensure better resource utilization, improved data pipeline performance, and enhanced reporting clarity. This task is vital for maintaining the organization's competitive edge and ensuring the scalability of its data infrastructure.  ",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-07-09T14:15:12.502188",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 15000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "The agent is tasked with analyzing the SQL Server environment to identify most used, less used,tables that are present as target in more than one SSIS package, redundant data objects and optimize its design. The analysis should focus on usage patterns within SSIS packages, SSRS RDL files, and the EDW schema. The agent should categorize tables based on their usage and provide actionable recommendations for optimization.  \n\n### INSTRUCTIONS:  \n\n#### Context and Background Information:  \n- **SQL Server EDW**: A centralized repository for structured data, supporting ETL processes via SSIS and reporting via SSRS.  \n- **SSIS (SQL Server Integration Services)**: A tool used for ETL (Extract, Transform, Load) processes to move and transform data.  \n- **SSRS (SQL Server Reporting Services)**: A reporting tool used for creating, managing, and delivering reports.  \n- **DDL Schema**: Defines the structure of database objects, such as tables, columns, and relationships.  \n\n#### Scope and Constraints:  \n- Focus exclusively on SQL Server EDW, SSIS, and SSRS components.  \n- Ensure recommendations align with best practices for scalability, efficiency, and usability.  \n- Avoid recommending changes that require significant architectural overhauls unless absolutely necessary.  \n\n#### Process Steps to Follow:  \n1. **Usage Analysis**:  \n   - Extract metadata from SSIS packages to identify tables utilized and unused.  \n   - Parse SSRS RDL files to determine tables utilized and unused.  \n   - Analyze the EDW DDL schema to identify table usage patterns.  \n\n2. **Categorization**:  \n   - Categorize tables based on their usage patterns. For each table, provide:  \n     - Table name.  \n     - Column names.  \n     - Associated SSIS package name(s).  \n     - Associated SSRS RDL file name(s).  \n   - Use the following categories:  \n     - Extensively used in both SSIS and SSRS. \n     - Tables- Columns that are present as a Target (as Insert or Update or Delete) in more than one SSIS process  \n     - Rarely or never used in either SSIS or SSRS.  \n     - Exclusively used in SSIS but not in SSRS.  \n     - Exclusively used in SSRS but not in SSIS.  \n-Tables that are used as Source in more than one SSIS package\n-Tables that are used as Target in more than one SSIS package\n-Tables that are used as Lookup in more than one SSIS package\n\n**Note :\n-do not skip any tables or objects like from salesforce\n- do not skip any column names\n-do not mention 'all columns' instead of column names\n-include all column names\n\n3. **Recommendations**:  \n   - Propose strategies to optimize the EDW data model for efficiency and scalability.  \n   - Suggest improvements to SSIS pipeline design for enhanced ETL performance. \n- Suggest  consolidation approach for ELT processes that have same table - columns as target (as insert or update or delete) \n   - Recommend refinements to SSRS report design for better clarity and usability.  \n\n#### OUTPUT FORMAT:  \n\nProvide a detailed markdown report structured as follows:  \n\n```markdown\n# SQL Server EDW Optimization Analysis  \n\n## 1. Introduction  \n- Overview of the analysis.  \n- Importance of optimizing the EDW environment.  \n\n## 2. Usage Analysis  \n### SSIS Packages  \n- Summary of table usage patterns in SSIS.  \n### SSRS RDL Files  \n- Summary of table usage patterns in SSRS.  \n### EDW DDL Schema  \n- Summary of table usage patterns in the schema.  \n\n## 3. Categorization  \n### Extensively Used in Both SSIS and SSRS  \n| Table Name | Column Name | SSIS Package(s) | SSRS RDL File(s) |  \n|------------|--------------|-----------------|------------------|  \n| ExampleTable1 | Column1 | Package1(Source), Package 3 (Lookup) | Report1, Report2 |  \n| ExampleTable1 | Column2 | Package1(Source), Package2(Target)| Report1, Report4 |  \n| ExampleTable2 | Column3 | Package2(Target), Package3(Target)| Report1, Report4 |\n\n### Table-Column present as Target (Insert/Update/Delete) in more than one SSIS package  \n| Table Name | Column Name | SSIS Package(s) | \n|------------|--------------|-----------------|------------------|  \n| ExampleTable1 | Column1 | SQLServer-SSISPackage, Salesforce-SSIS package |  \n| ExampleTable1 | Column2 | File-SSISPackage, Salesforce-SSIS package, Oracle-SSISPackage  |  \n| ExampleTable2 | Column3 | Oracle-SSISPackage, File-SSISPackage  |\n\n### Rarely or Never Used  \n| Table Name | Column Names | SSIS Package(s) | SSRS RDL File(s) |  \n|------------|--------------|-----------------|------------------|  \n| ExampleTable2 | Column1, Column2 | None | None |  \n\n### Exclusively Used in SSIS  \n| Table Name | Column Names | SSIS Package(s) | SSRS RDL File(s) |  \n|------------|--------------|-----------------|------------------|  \n| ExampleTable3 | Column1, Column2 | Package3 | None |  \n\n### Exclusively Used in SSRS  \n| Table Name | Column Names | SSIS Package(s) | SSRS RDL File(s) |  \n|------------|--------------|-----------------|------------------|  \n| ExampleTable4 | Column1, Column2 | None | Report3 |  \n\n-Tables that are used as Source in more than one SSIS package\n| Table Name |  SSIS Package(s)   \n|------------|--------------|\n|Table 1 | Package 1, Package 2 |  \n\n-Tables that are used as Target in more than one SSIS package\n| Table Name |  SSIS Package(s)   \n|------------|--------------|\n|Table 1 | Package 2, Package 4 | \n-Tables that are used as Lookup in more than one SSIS package\n| Table Name |  SSIS Package(s)   \n|------------|--------------|\n|Table 1 | Package 1, Package 3 | \n\n## 4. Recommendations  \n### EDW Data Model Optimization  \n- Strategy 1: [Description]  \n- Strategy 2: [Description]  \n\n### SSIS Pipeline Design Improvements  \n- Recommendation 1: [Description]  \n- Recommendation 2: [Description]  \n\n### SSRS Report Design Refinements  \n- Suggestion 1: [Description]  \n- Suggestion 2: [Description]  \n\n## 5. Conclusion  \n- Summary of findings and recommendations.  \n- Importance of implementing the proposed changes.  \n```\n\n#### Quality Criteria:  \n- Ensure accuracy in identifying table usage patterns.  \n- Provide actionable, industry-standard recommendations.  \n- Use SQL Server-specific terminology and formatting.  \n- Ensure clarity and readability of the markdown report.  \n**Note for output :\n- dont not skip any columns\n-dont mention 'all columns' instead of column names\n-include all column names\n\n\n**INPUT**:\n{{EDWDDL}} , ddl of the EDW model which includes all the salesforce data objects\n{{SSISMapping}} , mapping of the EDW fields to the SSIS package\n{{SSRSMaping}} , mapping of the EDW fields to the SSRS rdl files\n",
                        "expectedOutput": "**OUTPUT**: A detailed markdown report analyzing the SQL Server EDW environment, categorizing tables based on usage, and providing actionable recommendations for optimization.  "
                    },
                    "maxIter": 25,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            },
            {
                "serial": 2,
                "agent": {
                    "id": 4706,
                    "name": "DI_FabricArchitecture_Recommendation",
                    "role": "Microsoft Fabric Architect",
                    "goal": "Recommend an optimized Microsoft Fabric architecture by transitioning SSIS to Data Factory/Data Engineering and SSRS to Power BI, while streamlining the existing SQL Server EDW architecture. ",
                    "backstory": "The organization is currently relying on legacy systems, including SSIS for ETL processes, SSRS for reporting, and SQL Server EDW for data storage and analytics. These systems have redundancies and inefficiencies that hinder scalability, performance, and integration with modern cloud-based solutions. Microsoft Fabric offers a unified platform that can address these challenges by modernizing the architecture, improving data flow, and enabling advanced analytics capabilities. The optimized architecture will enhance operational efficiency, reduce maintenance overhead, and align with industry best practices for cloud-based data solutions.  ",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-07-09T14:32:25.835387",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 20000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "The agent is tasked with designing a modern Microsoft Fabric architecture based on the provided table detailing column information and calculations for SSIS, SSRS, and EDW DDL. The agent must evaluate the current setup, identify redundancies, and propose improvements to streamline the architecture. The solution should leverage Microsoft Fabric services, such as transitioning SSIS to Data Factory/Data Engineering and SSRS to Power BI, while optimizing the SQL Server EDW.  \n\n### **INSTRUCTIONS:**  \n\n#### **Context and Background Information:**  \n- **SSIS:** Used for ETL processes, but lacks scalability and integration with modern cloud platforms.  \n- **SSRS:** Provides reporting capabilities but is limited in visualization and interactivity compared to Power BI.  \n- **SQL Server EDW:** Serves as the central data warehouse but may contain redundant or inefficient structures.  \n\n#### **Scope and Constraints:**  \n- The solution must utilize Microsoft Fabric services, including Data Factory, Data Engineering, and Power BI.  \n- The architecture should align with best practices for scalability, performance, and maintainability.  \n- The output must be in Markdown format, including a clear diagram and detailed recommendations.  \n\n#### **Process Steps:**  \n1. **Evaluate Current Architecture:**  \n   - Analyze the provided table detailing column information and calculations for SSIS, SSRS, and EDW DDL.  \n   - Identify redundancies and inefficiencies in the current setup.  \n\n2. **Propose Microsoft Fabric Services:**  \n   - Recommend transitioning SSIS to Data Factory/Data Engineering for ETL processes.  \n   - Suggest replacing SSRS with Power BI for reporting and visualization.  \n   - Optimize SQL Server EDW by addressing redundancies and improving data model design.  \n\n3. **Design the Optimized Architecture on Microsoft Fabric:**  \n   - Create a clear Markdown diagram with labeled boxes and arrows, showing the flow of data between Microsoft Fabric services.  \n   - Include key design considerations for:  \n     - **Data Model:** Ensure scalability, normalization, and alignment with analytics needs.  \n     - **SSIS Packages:** Define how they will be transitioned to Data Factory/Data Engineering.  \n     - **SSRS Reports:** Specify how they will be migrated to Power BI, with improved interactivity and visualization.  \n\n4. **Document Recommendations:**  \n   - Write a detailed report in Markdown format, including:  \n     - **Table of Contents:** Structured as expected from a Microsoft Fabric Architect.  \n     - **Architecture Overview:** Explanation of the proposed design and its benefits.  \n     - **Implementation Steps:** Clear steps for transitioning SSIS, SSRS, and optimizing EDW.  \n     - **Best Practices:** Guidelines for maintaining the architecture.  \n\n#### **OUTPUT FORMAT:**  \n- **Format:** Markdown  \n1. Assessment of Existing Environment\nProvide a brief description  followed by below sub topics\n**Inventory Analysis:\n-Number of SSIS packages and SSRS reports.\n-Source and target systems.\n-Frequency and schedule of jobs/reports.\n-Package Complexity:\n\n-Use of script tasks, custom components, error handling, parameters.\n\n-Report Complexity:\n-Datasets, parameters, expressions, and drillthrough navigation.\n\n2. Architecture Principles for Fabric\nProvide a brief description  followed by below sub topics\n** Architecture Overview & Diagram\n-Based on the analysis of SSIS packages and SSRS reports, generate a new Microsoft Fabric architecture diagram in Markdown format. The diagram should use blocks and arrows in plain text, with clear indentation and structure to represent data flow.\n\n-Data Lake-first Architecture:\n-Leverage OneLake as the central data store.\n-Delta Lake and Lakehouse Strategy:\n-Transition ETL to ELT using Lakehouse and shortcuts.\n-Semantic Model Usage:\n-Replace SSRS datasets with Power BI semantic models.\n\n-Use blocks to represent:\n*- Data Sources\n*- Ingestion Layer (Dataflows Gen2, Pipelines)\n*- Storage Layer (OneLake, Lakehouse, Warehouse)\n*- Processing (Notebooks, Spark, T-SQL Endpoints)\n*- Semantic Model (Power BI Dataset)\n*- Reporting (Power BI Reports, Paginated Reports)\n*- Governance (Purview, RBAC)\n\n-Use arrows (`-->`) or backslashes (`\\`) to show directional flow from source to reporting and governance. Format it as a Markdown diagram with fenced code block (triple backticks).\n\n3. SSIS Migration Strategy\nProvide a brief description  followed by below sub topics\n**For each SSIS package recommend which of the following is best \n-Retire / Refactor / Consolidate Migrate Decision Framework:\n-Retire: Obsolete packages.\n-Refactor: Rebuild using Fabric Dataflows Gen2 or Pipelines.\n- Conoslidate: Similar logic packages or same target, source packages\n-Migrate: Packages that can be lifted into Azure-SSIS IR (interim).\n-Low-code ETL with Dataflows Gen2: Replacing simple SSIS tasks.\n-Notebooks and Spark for Advanced Logic:  for script-heavy or transformation-intensive packages.\n**Table output\n-Package Name|Recommended Approach|Reason for the Recommendation\n\n4. SSRS Migration Strategy\nProvide a brief description  followed by below sub topics\n**For each SSRS report recommend the following\n-Paginated Reports in Power BI Service:\n-Analytical dashboard recommendation for improved user experience .\n-Shift from SQL Server/Oracle queries to Fabric Lakehouse/SQL Endpoint models.\n**Table output\n-Report Name|Recommended Approach|Reason for the Recommendation\n\n5. Integration and Connectivity\nProvide a brief description followed by below sub topics\n**Source Data Connectors:\n-Existing SSIS sources vs supported connectors in Fabric (Dataflows Gen2).\n-DirectQuery/Import Modes:\n-Impact on performance and cost for migrated reports.\n-Data Gateway Considerations:\n-For on-prem data during interim phase.\n\n6. Security and Governance\nProvide a brief description  followed by below sub topics \n-Role-based Access Control (RBAC) in Fabric.\n-Sensitivity Labels and Lineage in Purview/Fabric.\n-Auditability and Compliance.\n\n7. Cost and Performance\nA brief description followed by below sub topics\n**Fabric Capacity Planning:\n-F SKU (per user) vs P SKU (per capacity).\n--Compute Cost Optimization:\n-Query pattern shift, caching, pipeline triggers.\n\n8. Monitoring and Observability\nProvide a brief description  followed by below sub topics\n**Fabric Monitoring Capabilities:\n-Activity logs, metrics.\n--Pipeline and Report Monitoring:\n-Alerting for failures and performance thresholds.\n\n9. Future Scalability and Roadmap\nProvide a brief description  followed by below sub topics\n-Support for Real-time and Streaming Scenarios.\n-AI/ML Integration: Fabric Real-Time Hub, Copilot support.\n\n- **Quality Criteria:**  \n  - Clear and concise language.  \n  - Alignment with Microsoft Fabric best practices.  \n  - Logical flow and structure.  \n\n- **Formatting Needs:**  \n  - Use Markdown syntax for headings, lists, and diagrams.  \n  - Ensure the diagram is visually clear and easy to understand.  \n ",
                        "expectedOutput": "**OUTPUT:** A Markdown report with an optimized Microsoft Fabric architecture diagram and detailed recommendations."
                    },
                    "maxIter": 25,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            }
        ],
        "enableAgenticMemory": false,
        "levelId": 99,
        "org": "Ascendion",
        "orgId": 1,
        "domain": "Data&Insights",
        "domainId": 96,
        "projectId": 98,
        "project": "AllProjects",
        "teamId": 99,
        "team": "AVA Team",
        "callbacks": []
    }
}