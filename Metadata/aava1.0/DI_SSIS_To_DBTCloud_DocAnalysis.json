{
    "pipeline": {
        "pipelineId": 5007,
        "name": "DI_SSIS_To_DBTCloud_Doc&Analysis",
        "description": "SSIS Package Documentation, Analyzer and Plan",
        "createdAt": "2025-07-07T16:56:13.170+00:00",
        "pipeLineAgents": [
            {
                "serial": 1,
                "agent": {
                    "id": 5202,
                    "name": "DI_SSIS_Documentation",
                    "role": "Data Engineer",
                    "goal": "Analyze and document the SSIS package (.dtsx) to create a comprehensive guide that explains data flow, business logic, control flow, and all relevant metadata for better understanding, maintenance, and modernization.",
                    "backstory": "Clear documentation of SSIS packages ensures that both business and technical stakeholders can understand complex ETL workflows, enabling easier modifications, minimizing risks, and aligning with enterprise data management goals.",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-07-21T08:30:42.513387",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 8000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "Create detailed documentation for the provided SSIS package (.dtsx file).\n\nThe documentation must contain the following sections:\n- Add the following metadata at the top of each generated file:\n```\n=============================================\nAuthor:        Ascendion AVA+\nDate:   (Leave it empty)\nDescription:   <one-line description of the purpose>\n=============================================\n```\n- For the description, provide a concise summary of what the document does.\n-give this only once in top of the output not else where\n\n1. Overview of Package:\n   - Explain the purpose of the SSIS package.\n   - Describe how this ETL process fits into the broader data integration or warehousing strategy.\n   - Mention the business use case being addressed.\n   - Provide a high-level description of package components (Control Flow, Data Flow, Variables, etc.).\n2. Package Design and Structure\nDetail the design and modular layout of the SSIS package, including the sequence containers, data flow tasks, and control flow logic.\nList the key SSIS components involved such as:\n\nSource/Destination components\n\nLookups\n\nConditional Split\n\nAggregations\n\nDerived Columns\n\nExecute SQL Tasks\n\nData Flow Tasks\n\nControl Flow Elements\n\n3. Data Flow and Transformation Logic\nList all data flow paths and transformations applied within the Data Flow Tasks.\nFor each major transformation step:\n\nDescribe the transformation\u2019s logic and purpose.\n\nDetail any filtering, joins, business rules, derived column logic, or data cleansing applied.\n\nMention any data type conversions or validations performed.\n\n4. Data Mapping: \n   - Provide detailed mappings between source and target tables as a lineage in terms how the source table.columns are mapped \n     to the target table.columns\n   - Use the following structured format for each mapping:  \nTarget Table Name : Give actual target table name\n Target Column Name : Give actual target column name\n Source Table Name : Give actual source table name\n Source Column Name : Give actual source column name\n Remarks : Classify as 1 to 1 mapping or Transformation or Validation and provide a brief description\n5. Key Outputs:  \n    Describe final outputs created by the code like Inserts, Updates, Deletes.\n - Explain how outputs align with business goals and reporting needs.\n    \n\n6. apiCost: float\n   - Cost consumed by the API for this call (in USD).\n   - Ensure the cost is reported with all decimal places included.\n\nInput:\n* SSIS file content or metadata in the following placeholder:\n{{SSIS_Package}}",
                        "expectedOutput": "Structured documentation covering all 6 points above with metadata only once , with clarity, technical depth, and precise explanations for business and technical audiences."
                    },
                    "maxIter": 30,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            },
            {
                "serial": 2,
                "agent": {
                    "id": 6419,
                    "name": "DI_SSIS_To_DBTCloud_Analyzer ",
                    "role": "Data Engineer",
                    "goal": "Analyze the provided SSIS package to extract control flow and data flow logic, assess complexity, detect compatibility gaps with DBT Cloud, and generate a conversion readiness report. Provide a separate output per file.",
                    "backstory": "SSIS has been widely used for enterprise ETL workloads. However, with organizations moving to modern cloud-based platforms like Snowflake and DBT Cloud, there is a need to analyze legacy SSIS packages to understand their structure and feasibility of migration. This agent automates that process by offering a structured report to guide migration.",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-07-08T04:54:25.38214",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 8000,
                        "temperature": 0.20000000298023224,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "Parse the uploaded SSIS `.dtsx` package and produce a detailed migration analysis report with the following structure:\n\n1. Package Overview:  \n* Describe the purpose of the SSIS package, identifying its main tasks and business objective.\n\n2. Component Metrics:  \nProvide a table with the following columns:  \n* Control Flow Tasks: Total number and types (e.g., Execute SQL Task, Data Flow Task, Script Task)  \n* Data Flow Components: Number of Source, Transformation, and Destination components  \n* Variables Used: Number of package-level and scoped variables  \n* Connection Managers: Count and types of connection managers used (e.g., OLE DB, Flat File)  \n* Expressions: Number of expressions and variables using dynamic evaluations  \n* Precedence Constraints: Count of conditional task paths  \n* Looping Structures: Count of For Loop and Foreach Loop containers  \n* Event Handlers: Number of event handler routines defined  \n\n3. Conversion Feasibility:  \n* List each SSIS component and assess whether it has a direct mapping in DBT. Use tags like:\n    * \u2705 Direct Mapping\n    * \u26a0\ufe0f Needs Transformation\n    * \u274c Not Supported\n* Highlight complex constructs like Script Tasks, Dynamic SQL, or Custom Components\n\n4. Manual Adjustments:  \n* Recommend specific transformations required to convert unsupported or complex logic to DBTCloud, such as:\n    * Script Tasks \u2192 Refactor logic into staging tables or DBT macros  \n    * Data Flow Transformations \u2192 Rebuild using CTEs or incremental models  \n    * Conditional Task Paths \u2192 Implement via Jinja templating in DBT Cloud \n    * Logging/Event Handling \u2192 Replace with DBT Cloud artifacts and observability features  \n\n5. Conversion Complexity Score (0\u2013100):  \n* Score based on number of unsupported components, nesting depth, and dynamic logic  \n* Highlight the areas driving up complexity  \n\n6. Target Architecture Recommendation:  \n* Recommend whether to:\n    * Refactor (minimal changes, high fidelity)\n    * Rebuild (significant changes, better performance/flexibility)  \n* Justify recommendation based on maintainability, performance, and future extensibility\n\n7. Optimization Strategies:  \n* Suggest DBT Cloud best practices:\n    * Use of incremental models  \n    * CTE refactoring for transformations  \n    * Source freshness and testing frameworks  \n    * Tagging and documentation integration  \n\n8. apiCost: float  // Cost consumed by the API for this call (in USD)  \n* Report API usage cost with all decimal places, explicitly stating the currency (e.g., `apiCost: 0.00371 USD`)  \n\nInput:\n\n* For SSIS package file use the below file:  \n{{SSIS_Package}}",
                        "expectedOutput": "1. Package Overview:  \n* High-level description of the package\u2019s intent and flow  \n\n2. Component Metrics (Table):  \n| Metric | Count/Details |\n|--------|---------------|\n| Control Flow Tasks | ... |\n| Data Flow Components | ... |\n| Variables Used | ... |\n| Connection Managers | ... |\n| Expressions | ... |\n| Precedence Constraints | ... |\n| Looping Structures | ... |\n| Event Handlers | ... |\n\n3. Conversion Feasibility:  \n* List each SSIS component and mark its DBTCloud support status (`\u2705`, `\u26a0\ufe0f`, `\u274c`)  \n\n4. Manual Adjustments:  \n* Recommendations for converting unsupported logic to DBT Cloud equivalents  \n\n5. Conversion Complexity:  \n* Score: X/100  \n* High Complexity Areas: e.g., Script Task, Nested Loops  \n\n6. Target Architecture Recommendation:  \n* Recommendation: Refactor / Rebuild  \n* Justification: Based on complexity, maintainability, scalability  \n\n7. Optimization Strategies:  \n* Detailed DBT Cloud-specific improvement strategies  \n\n8. apiCost: float  \n* Example: `apiCost: 0.00245 USD`  \n* Must include all decimal values and mention currency"
                    },
                    "maxIter": 30,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            },
            {
                "serial": 3,
                "agent": {
                    "id": 6420,
                    "name": "DI_SSIS_To_DBTCloud_Plan",
                    "role": "Data Engineer",
                    "goal": "Estimate the overall development and unit testing effort for converting SSIS packages into DBT Cloud projects, including manual refactoring and model validation scope. Also, estimate the potential cost impact for executing equivalent DBT Cloud models in Snowflake, depending on the target platform.",
                    "backstory": "As part of the modernization initiative, legacy SSIS packages are being migrated to DBT Cloud. Accurately estimating the transformation and validation effort is essential for planning sprints, allocating resources, and ensuring quality and budget alignment.",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-07-08T05:08:12.929794",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 8000,
                        "temperature": 0.20000000298023224,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "task": {
                        "description": "You are tasked with providing a comprehensive development and testing effort estimate for converting SSIS packages into DBT Cloud models. Follow these instructions:  \n\nINSTRUCTIONS:  \n1. Review the metadata and complexity analysis generated by the `DI_SSIS_To_DBTCloud_Analyzer` agent.  \n2. Identify tasks, transformations, or patterns that require manual translation into DBT constructs.  \n3. Exclude direct-mapping elements from effort calculation. Focus only on custom logic, script tasks, control flow handling, and event management.  \n4. Estimate the number of hours required to:  \n   - Redesign complex components in DBT (e.g., conditional flows, dynamic SQL, looping logic)  \n   - Implement and test DBT models, macros, seeds, and documentation  \n   - Perform data validation between SSIS and DBT Cloud outputs  \n5. If cloud execution cost is required, use available Snowflake environment pricing based on execution pattern, volume, and frequency.  \n\nOUTPUT FORMAT:  \n\n1. Development and Testing Effort Estimation  \n   1.1 Manual Code Refactoring Effort  \n        - Provide hours estimated for transforming SSIS-specific elements into DBT Cloud logic  \n        - Include handling for Script Tasks, Expressions, Looping, Event Handlers  \n\n   1.2 Unit and Reconciliation Testing Effort  \n        - Estimate hours for validating correctness of data pipelines, especially for variables, conditional paths, and derived transformations  \n\n2. Cloud Execution Cost (Optional)  \n   2.1 DBT Cloud Runtime Cost (if Snowflake details are available)  \n        - Provide breakup of model execution cost based on volume processed and execution pattern  \n        - Highlight assumptions such as number of runs per day, average data volume per run  \n\n3. apiCost  \n   * Include the cost consumed by the API for this call in the output  \n   * Ensure the cost is reported as a floating-point value with currency explicitly mentioned as USD (e.g., `apiCost: 0.00431 USD`)  \n\nINPUT:  \n* Take the previous DI_SSIS_To_DBTCloud_Analyzer agent\u2019s output as input  \n* For the input SSIS package use this file: {{SSIS_Package}}\n* For the input environment configuration (e.g., Snowflake cost or capacity settings) use this file: {{Environment_Confi_Plan}}",
                        "expectedOutput": "1. Development and Testing Effort Estimation  \n   1.1 Manual Code Refactoring Effort (in hours)  \n   1.2 Unit and Reconciliation Testing Effort (in hours)  \n\n2. Cloud Execution Cost (Optional)  \n   2.1 DBT Runtime Cost (with calculation details and assumptions)  \n\n3. apiCost: float  \n   * Example: `apiCost: 0.00384 USD`  \n   * Must include all decimal values and mention currency"
                    },
                    "maxIter": 30,
                    "maxRpm": 0,
                    "maxExecutionTime": 300,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            }
        ],
        "enableAgenticMemory": false,
        "levelId": 99,
        "org": "Ascendion",
        "orgId": 1,
        "domain": "Data&Insights",
        "domainId": 96,
        "projectId": 98,
        "project": "AllProjects",
        "teamId": 99,
        "team": "AVA Team",
        "callbacks": []
    }
}