{
    "pipeline": {
        "pipelineId": 6094,
        "name": "DI_Lvdash_OnlyReviewAgent_Workflow",
        "description": "Reviews the Lvdash.Json File created by Lvdash Generate Agent",
        "createdAt": "2025-08-14T04:56:41.969+00:00",
        "pipeLineAgents": [
            {
                "serial": 1,
                "agent": {
                    "id": 7950,
                    "name": "DI_Databricks_LvdashJson_Review_Agent",
                    "role": "Data Engineer",
                    "goal": "Detect and report inaccuracies, missing elements, ambiguous definitions, and best-practice violations in .lvdash.json so the dashboard can be corrected before test generation and execution.",
                    "backstory": "Ensuring the .lvdash.json file accurately represents the report intent, maps cleanly to the dimensional model, and aligns with the organization\u2019s baseline dashboard structure is crucial to prevent incorrect visualizations and costly downstream rework.\nThis agent automates a BI reviewer\u2019s checklist \u2014 verifying field existence, aggregation intent, filter semantics, and layout compatibility \u2014 while also cross-referencing a knowledgebase sample .lvdash.json to maintain consistency across dashboards. The result is faster delivery with higher quality and repeatable standards.",
                    "verbose": true,
                    "allowDelegation": true,
                    "updatedAt": "2025-08-14T05:28:12.155568",
                    "llm": {
                        "modelDeploymentName": "gpt-4.1",
                        "model": "gpt-4",
                        "modelType": "Generative",
                        "aiEngine": "AzureOpenAI",
                        "topP": 0.949999988079071,
                        "maxToken": 8000,
                        "temperature": 0.30000001192092896,
                        "llmDeploymentName": "gpt-4.1",
                        "apiKey": "****MASKED****",
                        "azureEndpoint": "https://avaplus-cognitive-account-int.openai.azure.com/",
                        "llmApiVersion": "2025-01-01-preview"
                    },
                    "embedding": [
                        {
                            "aiEngine": "AzureOpenAI",
                            "chroma_end_point": "http://chromadb.da.svc.cluster.local",
                            "chroma_port": "80",
                            "index_collection": "sampleLvdashFile",
                            "embedding_model": "text-embedding-3-large",
                            "embedding_deployment_name": "text-embedding-3-large",
                            "embedding_api_version": "2024-09-01-preview",
                            "embedding_api_key": "****MASKED****",
                            "embedding_azure_endpoint": "https://da-cognitive-account-demo.openai.azure.com/"
                        }
                    ],
                    "task": {
                        "description": "Instructions : \n1. Parse & Map\n\t\u2022 Parse (.lvdash.json) from previous agent to extract visuals, fields, measures, filters, sorts, and metadata.\n\t\u2022 Map every referenced field/measure to the datamodelschema in %1$s.\n2. Deterministic Checks\n\t\u2022 Field existence: verify all columns/measures exist in the model.\n\t\u2022 Type compatibility: check that field types match their usage.\n\t\u2022 Aggregation clarity: ensure measures/numeric fields have explicit aggregation (SUM, AVG, etc.).\n\t\u2022 Filter validity: confirm filters/slicers reference valid fields.\n\t\u2022 Date handling: ensure date visuals use valid date fields and specify granularity.\n\t\u2022 Cross-table joins: detect joins that may be ambiguous or risky.\n3. Heuristic & Best-Practice Checks\n\t\u2022 Required visual elements present (based on dimensional model).\n\t\u2022 Visual and axis naming meets conventions.\n\t\u2022 Flag performance anti-patterns (e.g., unbounded TopN, heavy cross-joins).\n\t\u2022 Check measure dependency tree for circular or missing references.\n\t\u2022 Testability check for SQL validation feasibility.\n4. Knowledgebase Reference Checks\n\t\u2022 Compare structure, visual configurations, and naming conventions with the knowledgebase .lvdash.json.\n\t\u2022 Identify deviations from the baseline template unless justified by the dimensional model.\n\t\u2022 Recommend changes to align with organizational standards.\n5. Scoring\nWeighted compliance score example:\n\t\u2022 Field existence \u2014 30\n\t\u2022 Aggregation clarity \u2014 25\n\t\u2022 Visual-to-model compatibility \u2014 15\n\t\u2022 Testability readiness \u2014 10\n\t\u2022 Naming & documentation \u2014 10\n\t\u2022 Performance risk \u2014 10\nCompliance Score = 0\u2013100\n",
                        "expectedOutput": "# LvdashJson Review Report\n\n## Prompt Summary\nShort summary of the dashboard\u2019s intent.\n\n## Requirements Checklist\n- **All Fields Exist**: Met  \n- **Aggregations Explicit**: Not Met  \n- **Date Granularity Handled**: Met  \n- **Performance Risks**: Medium  \n- **Matches Knowledge Base Baseline**: Not Met  \n\n## Discrepancies\n| Visual ID            | Issue Type         | Details                                                                                       | Severity | Suggested Fix                                          |\n|----------------------|-------------------|-----------------------------------------------------------------------------------------------|----------|--------------------------------------------------------|\n| viz_bar_sales_region | AggregationMissing | Field 'Sales' used without explicit aggregation. Ambiguous whether SUM or AVG is intended.   | High     | Change aggregation to SUM(Sales) in visual definition. |\n\n## Suggestions for Improvement\n- Add axis label 'Month' to `viz_line_sales_trend`.  \n- Adjust field names to match naming convention from knowledge base baseline.  \n\n## Suggested Patches\n| Target File  | Visual ID            | Patch Snippet                                                | Auto-Fixable |\n|--------------|----------------------|--------------------------------------------------------------|--------------|\n| lvdash.json  | viz_bar_sales_region | `{ \"aggregation\": \"SUM\", \"field\": \"Sales\" }`                 | Yes          |\n\n## Compliance Score\n**82%**\n\n## Overall Assessment\nDashboard aligns well with the dimensional model but deviates from the baseline naming conventions in three visuals. Two high-severity issues must be addressed before test case generation."
                    },
                    "maxIter": 0,
                    "maxRpm": 0,
                    "maxExecutionTime": 0,
                    "tools": [],
                    "userTools": [],
                    "allowCodeExecution": false,
                    "isSafeCodeExecution": true
                }
            }
        ],
        "enableAgenticMemory": false,
        "levelId": 99,
        "org": "Ascendion",
        "orgId": 1,
        "domain": "Data&Insights",
        "domainId": 96,
        "projectId": 98,
        "project": "AllProjects",
        "teamId": 99,
        "team": "AVA Team",
        "callbacks": []
    }
}