# SQL Server EDW Optimization Analysis  

## 1. Introduction  
This report presents a comprehensive analysis of the SQL Server Enterprise Data Warehouse (EDW) environment, focusing on the identification of redundant data objects and optimization opportunities. The EDW supports critical ETL processes via SSIS and reporting through SSRS. Over time, the accumulation of unused and redundant data objects has impacted performance, storage, and maintainability. This analysis categorizes tables and columns based on their usage in SSIS packages and SSRS reports, and provides actionable recommendations to enhance efficiency, scalability, and usability.

## 2. Usage Analysis  

### SSIS Packages  
- The following tables are used as targets in SSIS packages:  
  - DimClaim, DimCheck, DimClaimant, DimExposure, DimLossLocation, DimUser, FactClaimTransaction, LossBodyParts  
- Lookup operations in SSIS packages are performed on:  
  - PublicID, BeanVersion (across all dimension tables and LossBodyParts), ClaimID (LossBodyParts)  
- The following tables are not used in any SSIS package:  
  - dmproc.Audit, dmproc.AuditReference, dmproc.ErrorLog, dmproc.BatchIdentifier  

### SSRS RDL Files  
- The following tables and columns are referenced in SSRS reports:  
  - DimClaim: ClaimID, ClaimStatus, ClaimCreateDate, CloseDate, ClaimType, IsActive, AssignmentStatusName  
  - FactClaimTransaction: TransactionCreateDate, IndemnityPaid, MedicalPaid, EmployersLiabilityPaid, ExpensePaid, IndemnityReserve, MedicalReserve, EmployerLiabilityReserve, ExpenseReserve, IndemnityRecovery, MedicalRecovery, EmployerLiabilityRecovery, ExpenseRecovery, SubrogationRecovery, IsActive, ClaimID  
  - DimUser: UserName, FirstName, LastName  
- The following tables are not referenced in any SSRS report:  
  - DimCheck, DimClaimant, DimExposure, DimLossLocation, LossBodyParts, dmproc.Audit, dmproc.AuditReference, dmproc.ErrorLog, dmproc.BatchIdentifier  

### EDW DDL Schema  
- The schema contains the following tables:  
  - DimClaim, DimCheck, DimClaimant, DimExposure, DimLossLocation, DimUser, FactClaimTransaction, LossBodyParts, dmproc.Audit, dmproc.AuditReference, dmproc.ErrorLog, dmproc.BatchIdentifier  
- All columns for each table are specified in the DDL.

## 3. Categorization  

### Extensively Used in Both SSIS and SSRS  
| Table Name             | Column Name                | SSIS Package(s)                                  | SSRS RDL File(s)                                   |
|------------------------|---------------------------|--------------------------------------------------|----------------------------------------------------|
| DimClaim               | ClaimID                   | EDW_CC_Load_DimClaim.dtsx (Target)               | Claims Financial Performance, Claims Operational Efficiency |
| DimClaim               | ClaimStatus               | EDW_CC_Load_DimClaim.dtsx (Target)               | ClaimsStatusSummary, Claims Operational Efficiency  |
| DimClaim               | ClaimCreateDate           | EDW_CC_Load_DimClaim.dtsx (Target)               | ClaimsStatusSummary, Claims Operational Efficiency  |
| DimClaim               | CloseDate                 | EDW_CC_Load_DimClaim.dtsx (Target)               | ClaimsStatusSummary, Claims Operational Efficiency  |
| DimClaim               | ClaimType                 | EDW_CC_Load_DimClaim.dtsx (Target)               | ClaimsStatusSummary, Claims Financial Performance   |
| DimClaim               | IsActive                  | EDW_CC_Load_DimClaim.dtsx (Target)               | ClaimsStatusSummary, Claims Operational Efficiency, Claims Financial Performance |
| DimClaim               | AssignmentStatusName      | EDW_CC_Load_DimClaim.dtsx (Target)               | Claims Operational Efficiency                      |
| FactClaimTransaction   | TransactionCreateDate     | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | IndemnityPaid             | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | MedicalPaid               | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | EmployersLiabilityPaid    | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | ExpensePaid               | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | IndemnityReserve          | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | MedicalReserve            | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | EmployerLiabilityReserve  | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | ExpenseReserve            | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | IndemnityRecovery         | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | MedicalRecovery           | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | EmployerLiabilityRecovery | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | ExpenseRecovery           | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | SubrogationRecovery       | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | IsActive                  | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| FactClaimTransaction   | ClaimID                   | EDW_CC_Load_FactClaimTransaction.dtsx (Target)   | Claims Financial Performance                       |
| DimUser                | UserName                  | EDW_CC_Load_DimUser.dtsx (Target)                | Claims Operational Efficiency                      |
| DimUser                | FirstName                 | EDW_CC_Load_DimUser.dtsx (Target)                | Claims Operational Efficiency                      |
| DimUser                | LastName                  | EDW_CC_Load_DimUser.dtsx (Target)                | Claims Operational Efficiency                      |

### Table-Column present as Target (Insert/Update/Delete) in more than one SSIS package  
| Table Name           | Column Name                  | SSIS Package(s)                                   |
|----------------------|-----------------------------|---------------------------------------------------|
| None                 | -                           | -                                                 |

*Note: Based on the SSISAnalyzer, each table is only targeted by its respective package. No table-column is targeted in more than one SSIS package.*

### Rarely or Never Used  
| Table Name             | Column Names                                                                                                    | SSIS Package(s) | SSRS RDL File(s) |
|------------------------|-----------------------------------------------------------------------------------------------------------------|-----------------|------------------|
| dmproc.Audit           | AuditID, ControlID, BatchID, Status, InitiateDtm, CompletedInd, ConcludeDtm, SourceCount, InsertCount, UpdateCount, UnChangeCount, SourceAmount, TargetAmount | None            | None             |
| dmproc.AuditReference  | ControlID, ETLPackage                                                                                           | None            | None             |
| dmproc.ErrorLog        | ErrorLogID, ControlID, BatchID, error_type_cd, error_number, error_message                                      | None            | None             |
| dmproc.BatchIdentifier | BatchID, ETLPackage, LOB, Status, EndDate                                                                       | None            | None             |

### Exclusively Used in SSIS  
| Table Name             | Column Names (all columns)                                                                                      | SSIS Package(s)                      | SSRS RDL File(s) |
|------------------------|----------------------------------------------------------------------------------------------------------------|--------------------------------------|------------------|
| DimCheck               | CheckID, PublicID, IsActive, BatchID, DateAdded, DateUpdated, LegacySourceSystem, BeanVersion, GWRowNumber, CheckNumber, PayTo, IssueDate, ScheduledSendDate, IsPrimary, DeductionType, BankName, BankAccount, BankAccountType, BankRoutingNumber, InvoiceNumber, CheckType, EnteredTime, ServicePdStart, ServicePdEnd, DateOfService, DeliveryMethod, PaymentMethod, GrossAmount, ClaimContactName, MailTo, MailToAddress, ReportableAmount, PaymentType, RecurrencePublicID, DataEffectiveDate, DataExpirationDate, DeductionAmount, CheckStatus, AddedByUser | EDW_CC_Load_DimCheck.dtsx (Target)   | None             |
| DimClaimant            | ClaimantID, FirstName, LastName, Occupation, AddressLine1, AddressLine2, AddressTypeDescription, City, PostalCode, State, UpdateUserID, WorkPhone, PublicID, BatchID, IsActive, DateAdded, LegacySourceSystem, DateUpdated, BeanVersion, GWRowNumber, DataEffectiveDate, DataExpirationDate, Gender, DateOfBirth, LicenseNumber, LicenseState, FullName | EDW_CC_Load_DimClaimant.dtsx (Target) | None             |
| DimExposure            | ExposureID, PublicID, CloseDate, SettleDate, DataEffectiveDate, DataExpirationDate, BatchID, IsActive, DateAdded, LegacySourceSystem, DateUpdated, ExposureLimit, BeanVersion, GWRowNumber, CoverageTypeCode, CoverageSubTypeCode, ExposureCode, ExposureName, ExposureCreateDate, ExposureNumber, ClaimantName, ExposureStatus, ValidationLevel, HandlingStrategy, AverageWeeklyWages, DaysInWeek, IsOnGoing, LossParty, Segment, JurisdictionState, PolicySystemCoverageType, PolicySystemCoverageID, Deductible, CoverageTypeName, CoverageSubTypeName | EDW_CC_Load_DimExposure.dtsx (Target) | None             |
| DimLossLocation        | LossLocationID, PublicID, BatchID, PostalCode, City, County, AddressLine1, AddressLine2, BeanVersion, GWRowNumber, IsActive, LegacySourceSystem, State, DateAdded, DateUpdated, DataEffectiveDate, DataExpirationDate | EDW_CC_Load_DimLossLocation.dtsx (Target) | None             |
| LossBodyParts          | LossBodyPartsID, PublicID, ClaimID, BodyPartName, NatureOfInjury, LossCause, AccidentType, Decision, BatchId, DateAdded, DateUpdated, BeanVersion, DetailBodyPart | EDW_CC_Load_LossBodyParts.dtsx (Target) | None             |

### Exclusively Used in SSRS  
| Table Name             | Column Names                | SSIS Package(s) | SSRS RDL File(s) |
|------------------------|-----------------------------|-----------------|------------------|
| None                   | -                           | -               | -                |

### Tables that are used as Source in more than one SSIS package
| Table Name             | SSIS Package(s)             |
|------------------------|-----------------------------|
| None                   | -                           |

### Tables that are used as Target in more than one SSIS package
| Table Name             | SSIS Package(s)             |
|------------------------|-----------------------------|
| None                   | -                           |

### Tables that are used as Lookup in more than one SSIS package
| Table Name             | SSIS Package(s)             |
|------------------------|-----------------------------|
| None                   | -                           |

## 4. Recommendations  

### EDW Data Model Optimization  
- **Strategy 1: Archive or Remove Unused Tables and Columns**  
  - Tables such as `dmproc.Audit`, `dmproc.AuditReference`, `dmproc.ErrorLog`, and `dmproc.BatchIdentifier` are not used in either SSIS or SSRS. Consider archiving or removing these tables after validating with business stakeholders and confirming they are not required for compliance or ad hoc reporting.
  - Within referenced tables, columns not used in either SSIS or SSRS (as detailed above) should be reviewed for possible deprecation to reduce storage and improve maintainability.

- **Strategy 2: Document Data Lineage and Usage**  
  - Update documentation to clearly indicate which tables and columns are actively used, which are deprecated, and which are reserved for future use. This will aid governance and future optimization efforts.

### SSIS Pipeline Design Improvements  
- **Recommendation 1: Consolidate ETL Logic for Shared Targets**  
  - Although no table-column is currently targeted by more than one SSIS package, if future changes require multiple packages to update the same table/columns, consider consolidating these processes to a single package or orchestrated workflow to avoid data integrity issues and improve maintainability.

- **Recommendation 2: Optimize SCD and Lookup Operations**  
  - Review and optimize Slowly Changing Dimension (SCD) logic and lookup operations, especially those involving BeanVersion and PublicID, to ensure they are efficient and do not cause performance bottlenecks.

### SSRS Report Design Refinements  
- **Suggestion 1: Review and Refine Report Data Sources**  
  - Remove unused tables and columns from report data sources to streamline report execution and improve clarity for report developers.

- **Suggestion 2: Enhance Report Documentation**  
  - Document which EDW fields are used in each report and the business logic applied, to facilitate future maintenance and onboarding of new report developers.

## 5. Conclusion  
This analysis has identified several opportunities to optimize the SQL Server EDW environment by removing or archiving unused tables and columns, consolidating ETL logic where appropriate, and refining report data sources. Implementing these recommendations will improve performance, scalability, and maintainability, ensuring the EDW continues to support business needs efficiently and effectively.