====================================================
Author:        Ascendion AAVA
Date:          
Description:   Informatica mapping and workflow documentation for PS_VENDOR data ingestion and transformation from flat file to Oracle target.
====================================================

# 1. Overview of Graph/Component

This Informatica workflow (`wkf_aufi016d_PS_Vendor`) ingests vendor data from a flat file source (`PS_VENDOR_S4`), applies audit and load timestamp enrichment, and loads the data into the Oracle target table `PS_VENDOR`. The process supports data warehousing and reporting by ensuring vendor master data is consistently and accurately transferred from source to target with audit tracking.

# 2. Component Structure and Design

- **Source Definition:**  
  - `PS_VENDOR_S4` (Flat File, delimited by `||`, codepage US-ASCII)
- **Source Qualifier Transformation:**  
  - `SQ_PS_VENDOR_S4` (Reads all fields from source, passes to next transformation)
- **Expression Transformation:**  
  - `exp_Vendor` (Adds audit year from parameter, sets load date to session start time, passes through other fields)
- **Target Definition:**  
  - `PS_VENDOR` (Oracle table)
- **Workflow:**  
  - `wkf_aufi016d_PS_Vendor` with a single session (`s_m_aufi016d_PS_Vendor`)
- **Session:**  
  - Reads from flat file, loads to Oracle, manages reject files, and logs.

**Logical Flow:**  
`PS_VENDOR_S4` (Source) → `SQ_PS_VENDOR_S4` (Source Qualifier) → `exp_Vendor` (Expression) → `PS_VENDOR` (Target)

**Parameters/Variables:**  
- `$$Audit_Year` (Mapping variable, default 2019)
- Session and workflow variables for status, error, and row counts.

# 3. Data Flow and Processing Logic

- **Processed Datasets:**  
  - Source: `profrec_vendor.txt` (Flat file)
  - Target: `PS_VENDOR` (Oracle table)

- **Data Flow:**  
  1. **Ingestion:** Reads vendor data from `profrec_vendor.txt` (delimited by `||`).
  2. **Source Qualifier:** Passes all fields as-is.
  3. **Transformation:**  
     - Sets `AUD_YR_NBR` to `$$Audit_Year` (parameterized, default 2019).
     - Sets `LOAD_DT` to session start time (`SESSSTARTTIME`).
     - All other fields are mapped 1:1.
  4. **Load:** Inserts data into `PS_VENDOR` Oracle table.  
  5. **Error Handling:** Rejects are written to `$PMBadFileDir/corp/BadFiles/ps_vendor1.bad`.

# 4. Data Mapping (Lineage)

| Target Table Name | Target Column Name      | Source Table Name | Source Column Name      | Remarks                                      |
|-------------------|------------------------|-------------------|------------------------|----------------------------------------------|
| PS_VENDOR         | AUD_YR_NBR             | (Parameter)       | $$Audit_Year           | Transformation: Set to mapping parameter     |
| PS_VENDOR         | SET_ID                 | PS_VENDOR_S4      | SET_ID                 | 1:1 Mapping                                 |
| PS_VENDOR         | VENDOR_NBR_ID          | PS_VENDOR_S4      | VENDOR_NBR_ID          | 1:1 Mapping                                 |
| PS_VENDOR         | VENDOR_SHORT_NAME      | PS_VENDOR_S4      | VENDOR_SHORT_NAME      | 1:1 Mapping                                 |
| PS_VENDOR         | VENDOR_SHORT_USR_NAME  | PS_VENDOR_S4      | VENDOR_SHORT_USR_NAME  | 1:1 Mapping                                 |
| PS_VENDOR         | NAME_1                 | PS_VENDOR_S4      | NAME_1                 | 1:1 Mapping                                 |
| PS_VENDOR         | NAME_2                 | PS_VENDOR_S4      | NAME_2                 | 1:1 Mapping                                 |
| PS_VENDOR         | VENDOR_STAT_CD         | PS_VENDOR_S4      | VENDOR_STAT_CD         | 1:1 Mapping                                 |
| PS_VENDOR         | VENDOR_CLASS_CD        | PS_VENDOR_S4      | VENDOR_CLASS_CD        | 1:1 Mapping                                 |
| PS_VENDOR         | REMIT_SET_ID           | PS_VENDOR_S4      | REMIT_SET_ID           | 1:1 Mapping                                 |
| PS_VENDOR         | REMIT_VENDOR_ID        | PS_VENDOR_S4      | REMIT_VENDOR_ID        | 1:1 Mapping                                 |
| PS_VENDOR         | CORP_SET_ID            | PS_VENDOR_S4      | CORP_SET_ID            | 1:1 Mapping                                 |
| PS_VENDOR         | CORP_VENDOR_ID         | PS_VENDOR_S4      | CORP_VENDOR_ID         | 1:1 Mapping                                 |
| PS_VENDOR         | ENTERED_BY_ID          | PS_VENDOR_S4      | ENTERED_BY_ID          | 1:1 Mapping                                 |
| PS_VENDOR         | WTHD_SW_CD             | PS_VENDOR_S4      | WTHD_SW_CD             | 1:1 Mapping                                 |
| PS_VENDOR         | PRIM_VENDOR_ID         | PS_VENDOR_S4      | PRIM_VENDOR_ID         | 1:1 Mapping                                 |
| PS_VENDOR         | LOAD_DT                | (System Variable) | SESSSTARTTIME          | Transformation: Set to session start time    |
| PS_VENDOR         | ACCOUNT_GROUP          | PS_VENDOR_S4      | ACCOUNT_GROUP          | 1:1 Mapping                                 |

# 5. Transformation Logic

- **Source Qualifier (`SQ_PS_VENDOR_S4`):**  
  - Passes all fields from source to next transformation without filtering or joining.
- **Expression Transformation (`exp_Vendor`):**  
  - `AUD_YR_NBR`: Set to `$$Audit_Year` (mapping parameter, default 2019).
  - `LOAD_DT`: Set to `SESSSTARTTIME` (session start time).
  - All other fields: Direct pass-through (e.g., `SET_ID = SET_ID`).
- **No lookups, joins, or aggregations are used.**

# 6. Complexity Analysis

- **Number of Mappings:** 1 (`m_aufi016d_PS_Vendor`)
- **Number of Lines of Code (in transformation or workflow):** ~300 (XML lines, including all components)
- **Transform Functions Used:** 2 (Expression for audit year and load date)
- **Joins Used:** None
- **Lookup Files or Datasets:** None
- **Parameter Sets (session) or Plan Files Used:** 1 (`$$Audit_Year`)
- **Number of Output Datasets:** 1 (`PS_VENDOR`)
- **Conditional Logic or `if-else` flows:** 0
- **External Dependencies:**  
  - Oracle JDBC connection (`BAT_AUFI_RWH`)
  - Source flat file (`profrec_vendor.txt`)
  - File system paths for logs and rejects
- **Overall Complexity Score:** 15 (Simple, direct mapping with minimal transformation)

# 7. Key Outputs

- **Target Table:** `PS_VENDOR` (Oracle)
- **Format:** Relational table (Oracle), all fields mapped from source or enriched.
- **Intended Use:** Vendor master data for reporting, analytics, and downstream operational processes.

# 8. Error Handling and Logging

- **Reject Handling:**  
  - Bad records are written to `$PMBadFileDir/corp/BadFiles/ps_vendor1.bad`.
- **Logging:**  
  - Session logs: `$PMSessionLogDir/corp/SessLogs/s_aufi016d_PS_Vendor.log`
  - Workflow logs: `$PMWorkflowLogDir/corp/WorkflowLogs/wkf_aufi016d_PS_Vendor.log`
- **Error Variables:**  
  - Workflow/session variables track error codes, messages, and row counts.
- **Abort/Recovery:**  
  - On error, session is set to fail and workflow continues as per configuration.
- **No explicit reject transformation or error tagging in mapping.**

# 9. API Cost (Optional for Cloud Informatica Deployments)

- **Estimated Compute/I/O Cost:**  
  - As this is a simple flat file to Oracle load with minimal transformation, cost is primarily I/O bound.
  - **Formula:**  
    - Cost ≈ (Input File Size in GB) × (I/O Rate per GB) + (Rows × Transformation Cost per Row)
    - For this mapping:  
      - Transformation cost is negligible (simple expressions only).
      - I/O cost depends on file size and Oracle write throughput.
  - **Example:**  
    - For a 1GB file, if I/O cost is $0.10/GB and transformation cost is $0.01/1000 rows, total cost for 100,000 rows ≈ $0.10 + $1.00 = $1.10.

---

**End of Documentation**